<UserControl x:Class="AguaSB.Usuarios.Views.Listado"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:icons="http://metro.mahapps.com/winfx/xaml/iconpacks"
             xmlns:material="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:Controles="clr-namespace:AguaSB.Views.Controles;assembly=AguaSB.Views"
             xmlns:Estilos="clr-namespace:AguaSB.Estilos;assembly=AguaSB.Estilos"
             xmlns:ViewModel="clr-namespace:AguaSB.Usuarios.ViewModels;assembly=AguaSB.Usuarios.ViewModels"
             d:DataContext="{d:DesignInstance Type={x:Type ViewModel:Listado}, IsDesignTimeCreatable=False}"
             mc:Ignorable="d" Background="White"
             d:DesignHeight="768" d:DesignWidth="1024">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/materialdesigntheme.ComboBox.xaml"/>
                <ResourceDictionary Source="Plantillas/AgregarPlantillas.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.ListView.xaml" />
                <ResourceDictionary Source="pack://application:,,,/AguaSB.Estilos;component/Resources/Estilos.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid Style="{StaticResource CorrectTextRendering}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Controles:BarraSuperior Grid.ColumnSpan="3" Titulo="Listado de usuarios" Foreground="White" 
                                 Icono="{icons:PackIconModern Kind=PeopleProfile, Width=20, Height=20}"/>

        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <DockPanel Margin="32 10 0 0" LastChildFill="True">
                <icons:PackIconModern DockPanel.Dock="Left" Margin="0 15 20 0" Kind="Magnify" Style="{StaticResource IconoLateral}" VerticalAlignment="Center"
                                      Estilos:Icono.Enfocado="{Binding ElementName=Buscar, Path=IsKeyboardFocusWithin}" Tag="{Binding ElementName=Buscar}"/>
                <ComboBox Name="Buscar" Margin="0" Tag="Buscar..." material:ComboBoxAssist.ShowSelectedItem="True" VerticalAlignment="Center"/>
            </DockPanel>

            <StackPanel Margin="16 0" Grid.Column="100" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom">
                <Button Name="FiltrosBoton" Click="MostrarFiltros" Width="150" Style="{StaticResource HighlightButton}">
                    <StackPanel Orientation="Horizontal">
                        <icons:PackIconMaterial Kind="Filter" Width="20" Height="20" VerticalAlignment="Center"/>
                        <TextBlock Margin="10 0 0 0" Text="Filtros" FontSize="{StaticResource TamanoH4}" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <Popup Name="Filtros" Placement="Bottom" PlacementTarget="{Binding ElementName=FiltrosBoton}" AllowsTransparency="True" PopupAnimation="Fade"
                       StaysOpen="False">
                    <Border Margin="0 5" Width="400" Background="White" BorderBrush="#33000000" BorderThickness="1" CornerRadius="8">
                        <ScrollViewer>
                            <StackPanel Margin="30 10 0 10">
                                <Expander Name="FiltroFechaUltimoPago" Background="White" IsExpanded="{Binding FiltroFechaUltimoPago.Activo, Mode=TwoWay}">
                                    <Expander.Header>
                                        <StackPanel Margin="-25 0 0 0" Orientation="Horizontal">
                                            <icons:PackIconModern Kind="CalendarDollar" Estilos:Icono.Enfocado="{Binding ElementName=FiltroFechaUltimoPago, Path=IsMouseOver}"
                                                                  Margin="0 0 20 0" Style="{StaticResource IconoLateral}"/>

                                            <TextBlock Text="Últimos pagos" Opacity="0.7" Style="{StaticResource h4}"/>
                                        </StackPanel>
                                    </Expander.Header>
                                    <StackPanel Margin="20 0 20 0">
                                        <DatePicker Margin="0 20 0 30" Tag="Desde" Text="{Binding FiltroFechaUltimoPago.Desde, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </StackPanel>
                                </Expander>
                                <Expander Name="FiltroDomicilio" Background="White" IsExpanded="{Binding FiltroDomicilio.Activo, Mode=TwoWay}">
                                    <Expander.Header>
                                        <StackPanel Margin="-25 0 0 0" Orientation="Horizontal">
                                            <icons:PackIconMaterial Kind="HomeVariant" Estilos:Icono.Enfocado="{Binding ElementName=FiltroDomicilio, Path=IsMouseOver}"
                                                                    Margin="0 0 20 0" Style="{StaticResource IconoLateral}"/>

                                            <TextBlock Text="Domicilio" Opacity="0.7" Style="{StaticResource h4}"/>
                                        </StackPanel>
                                    </Expander.Header>
                                    <StackPanel Margin="20 0 0 0">
                                        <DockPanel Margin="0 0 20 0">
                                            <icons:PackIconMaterial Kind="ViewGrid" Style="{StaticResource IconoLateral}" Tag="{Binding ElementName=FiltroSeccion}"
                                                                    Estilos:Icono.Enfocado="{Binding ElementName=FiltroSeccion, Path=IsKeyboardFocusWithin}"/>
                                            <ComboBox Name="FiltroSeccion" Grid.Column="1" Tag="Sección" ItemsSource="{Binding Secciones}" 
                                                          SelectedItem="{Binding FiltroDomicilio.Seccion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}"/>
                                        </DockPanel>
                                        <DockPanel Margin="0 0 20 0">
                                            <icons:PackIconEntypo Kind="Address" Style="{StaticResource IconoLateral}" Tag="{Binding ElementName=FiltroCalle}"
                                                                  Estilos:Icono.Enfocado="{Binding ElementName=FiltroCalle, Path=IsKeyboardFocusWithin}"/>
                                            <ComboBox Name="FiltroCalle" Grid.Column="1" Tag="Calle" ItemsSource="{Binding Calles}" 
                                                      SelectedItem="{Binding FiltroDomicilio.Calle, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}"/>
                                        </DockPanel>
                                    </StackPanel>
                                </Expander>
                                <Expander Name="FiltroAdeudo" Background="White" IsExpanded="{Binding FiltroAdeudo.Activo, Mode=TwoWay}">
                                    <Expander.Header>
                                        <StackPanel Margin="-25 0 0 0" Orientation="Horizontal">
                                            <icons:PackIconModern Kind="CurrencyDollar" Estilos:Icono.Enfocado="{Binding ElementName=FiltroAdeudo, Path=IsMouseOver}"
                                                                  Margin="0 0 20 0" Style="{StaticResource IconoLateral}"/>

                                            <TextBlock Text="Adeudo" Opacity="0.7" Style="{StaticResource h4}"/>
                                        </StackPanel>
                                    </Expander.Header>
                                    <StackPanel Margin="20 0 20 0">
                                        <TextBox Tag="Desde" Text="{Binding FiltroAdeudo.Desde, StringFormat={}{0:C}, TargetNullValue=Min, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                        <TextBox Tag="Hasta" Text="{Binding FiltroAdeudo.Hasta, StringFormat={}{0:C}, TargetNullValue=Max, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </StackPanel>
                                </Expander>
                                <Expander Name="FiltroFechaRegistro" Background="White" IsExpanded="{Binding FiltroFechaRegistro.Activo, Mode=TwoWay}">
                                    <Expander.Header>
                                        <StackPanel Margin="-25 0 0 0" Orientation="Horizontal">
                                            <icons:PackIconMaterial Kind="CalendarPlus" Estilos:Icono.Enfocado="{Binding ElementName=FiltroFechaRegistro, Path=IsMouseOver}"
                                                                    Margin="0 0 20 0" Style="{StaticResource IconoLateral}"/>

                                            <TextBlock Text="Fecha de registro" Opacity="0.7" Style="{StaticResource h4}"/>
                                        </StackPanel>
                                    </Expander.Header>
                                    <StackPanel Margin="20 0 20 0">
                                        <DatePicker Margin="0 20 0 30" Tag="Desde" Text="{Binding FiltroFechaRegistro.Desde, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                        <DatePicker Tag="Hasta" Text="{Binding FiltroFechaRegistro.Hasta, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </StackPanel>
                                </Expander>
                                <Expander Name="FiltroContrato" Background="White" IsExpanded="{Binding FiltroTipoContrato.Activo, Mode=TwoWay}">
                                    <Expander.Header>
                                        <StackPanel Margin="-25 0 0 0" Orientation="Horizontal">
                                            <icons:PackIconModern Kind="AlignJustify" Estilos:Icono.Enfocado="{Binding ElementName=FiltroContrato, Path=IsMouseOver}"
                                                                  Margin="0 0 20 0" Style="{StaticResource IconoLateral}"/>

                                            <TextBlock Text="Tipo de contrato" Opacity="0.7" Style="{StaticResource h4}"/>
                                        </StackPanel>
                                    </Expander.Header>
                                    <StackPanel Margin="20 0 0 0">
                                        <DockPanel Margin="0 0 20 0">
                                            <icons:PackIconMaterial Kind="Bookmark" Style="{StaticResource IconoLateral}" Tag="{Binding ElementName=FiltroClaseContrato}"
                                                                    Estilos:Icono.Enfocado="{Binding ElementName=FiltroClaseContrato, Path=IsKeyboardFocusWithin}"/>
                                            <ComboBox Name="FiltroClaseContrato" Grid.Column="1" Tag="Clase de contrato" ItemsSource="{Binding ClasesContrato}" 
                                                      SelectedItem="{Binding FiltroTipoContrato.ClaseContrato, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}"/>
                                        </DockPanel>
                                        <DockPanel Margin="0 0 20 0">
                                            <icons:PackIconMaterial Kind="ViewList" Style="{StaticResource IconoLateral}" Tag="{Binding ElementName=FiltroTipoContrato}"
                                                                    Estilos:Icono.Enfocado="{Binding ElementName=FiltroTipoContrato, Path=IsKeyboardFocusWithin}"/>
                                            <ComboBox Name="FiltroTipoContrato" Grid.Column="1" Tag="Tipo de contrato" ItemsSource="{Binding TiposContrato}" 
                                                      SelectedItem="{Binding FiltroTipoContrato.TipoContrato, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}"/>
                                        </DockPanel>
                                    </StackPanel>
                                </Expander>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </Popup>


                <Button Name="SeleccionColumnasBoton" Margin="10 0 0 0" Click="MostrarFiltroColumnas" Width="150">
                    <StackPanel Orientation="Horizontal">
                        <icons:PackIconMaterial Kind="Settings" Width="20" Height="20" VerticalAlignment="Center"/>
                        <TextBlock Margin="10 0 0 0" Text="Columnas" FontSize="{StaticResource TamanoH4}" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
                <Popup Name="SeleccionColumnas" PlacementTarget="{Binding ElementName=SeleccionColumnasBoton}" AllowsTransparency="True" PopupAnimation="Fade">
                    <StackPanel Width="200" Height="200" Background="White">

                    </StackPanel>
                </Popup>
            </StackPanel>

            <WrapPanel Margin="32 15" Grid.Row="1" Grid.ColumnSpan="3">
                <WrapPanel.Resources>
                    <DropShadowEffect x:Key="Shadow" Opacity="0.2"/>
                    <QuarticEase x:Key="Balanceo" EasingMode="EaseOut"/>
                    <Style TargetType="Border">
                        <Setter Property="Margin" Value="0 10 5 0"/>
                        <Setter Property="Padding" Value="8 0"/>
                        <Setter Property="MinWidth" Value="100"/>
                        <Setter Property="CornerRadius" Value="8"/>
                        <Setter Property="Effect" Value="{StaticResource Shadow}"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0.9" Duration="0:0:0.25" EasingFunction="{StaticResource Balanceo}"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="1.0" Duration="0:0:0.25" EasingFunction="{StaticResource Balanceo}"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="HorizontalAlignment" Value="Center"/>
                        <Setter Property="VerticalAlignment" Value="Center"/>
                        <Setter Property="FontSize" Value="{StaticResource TamanoH4}"/>
                        <Setter Property="Foreground" Value="White"/>
                    </Style>
                    <Style TargetType="Button" BasedOn="{StaticResource UtilityButton}">
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="Margin" Value="6 2 0 0"/>
                        <Setter Property="VerticalAlignment" Value="Bottom"/>
                        <Setter Property="ToolTip" Value="Quitar filtro"/>
                    </Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Orientation" Value="Horizontal"/>
                    </Style>
                    <Style TargetType="icons:PackIconMaterial">
                        <Setter Property="Width" Value="10"/>
                    </Style>
                </WrapPanel.Resources>
                <Border Background="{StaticResource MaterialRed}">
                    <StackPanel>
                        <TextBlock>
                            <Run>Clase:</Run> <Run Text="Doméstico" FontWeight="DemiBold"/>
                        </TextBlock>
                        <Button Content="{icons:PackIconMaterial Kind=Close}"/>
                    </StackPanel>
                </Border>

                <Border Background="{StaticResource MaterialRed}">
                    <StackPanel>
                        <TextBlock>
                            <Run>Tipo:</Run> <Run Text="Convencional" FontWeight="DemiBold"/>
                        </TextBlock>
                        <Button Content="{icons:PackIconMaterial Kind=Close}"/>
                    </StackPanel>
                </Border>
                <Border Background="{StaticResource MaterialGreen}">
                    <StackPanel>
                        <TextBlock>
                            <Run>Sección:</Run> <Run Text="Primera" FontWeight="DemiBold"/>
                        </TextBlock>
                        <Button Content="{icons:PackIconMaterial Kind=Close}"/>
                    </StackPanel>
                </Border>

                <Border Background="{StaticResource MaterialGreen}">
                    <StackPanel>
                        <TextBlock>
                            <Run>Calle:</Run> <Run Text="Guanajuato" FontWeight="DemiBold"/>
                        </TextBlock>
                        <Button Content="{icons:PackIconMaterial Kind=Close}"/>
                    </StackPanel>
                </Border>

                <Border Background="{StaticResource MaterialIndigo}">
                    <StackPanel>
                        <TextBlock>
                            <Run>Adeudo:</Run> <Run Text="$100.00 a $200.00" FontWeight="DemiBold"/>
                        </TextBlock>
                        <Button Content="{icons:PackIconMaterial Kind=Close}"/>
                    </StackPanel>
                </Border>

                <Border Background="{StaticResource MaterialOrange}">
                    <StackPanel>
                        <TextBlock>
                            <Run>Último pago:</Run> <Run Text="Desde 27/08/17" FontWeight="DemiBold"/>
                        </TextBlock>
                        <Button Content="{icons:PackIconMaterial Kind=Close}"/>
                    </StackPanel>
                </Border>

                <Border Background="{StaticResource MaterialBlueGrey}">
                    <StackPanel>
                        <TextBlock>
                            <Run>Registro:</Run> <Run Text="27/08/17 a 13/08/2018" FontWeight="DemiBold"/>
                        </TextBlock>
                        <Button Content="{icons:PackIconMaterial Kind=Close}"/>
                    </StackPanel>
                </Border>
            </WrapPanel>
        </Grid>

    </Grid>
</UserControl>
